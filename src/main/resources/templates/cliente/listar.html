<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec=http://www.thymeleaf.org/extras/spring-security xmlns:shiro=http://www.pollix.at/thymeleaf/shiro>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://getbootstrap.com/docs/5.2/assets/css/docs.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js">
</script>
<link rel="stylesheet" href="/css/style.css">

<head th:replace="~{fragmentos/head :: head('Editar Clientes')}"></head>

<body>
	<header th:replace="~{fragmentos/navBar :: nav}"></header>
	<header th:replace="~{fragmentos/header :: header('Lista de Clientes')}"></header>
	<div class="container-sm mb-4">
		<div class="col-12">
			<span th:styleappend="${(param.erro == null || param.mensagem == null) ? 'display: none;' : ''}"
				th:classappend="${(param.erro != null && param.erro) ? 'error-message' : 'success-message'}"
				th:text="${param.mensagem != null ? param.mensagem : ''}">Aviso
			</span>
		</div>
	</div>
	<div class="mt-4">
		<fieldset class="fieldset text-left mb-5">
			<div class="row">
				<div class="col-12">
					<div>
						<a class="btn btn-outline-success btn-sm" href="../cliente"><i
								class="bi bi-plus-circle-fill"></i> Novo Cliente</a>
					</div>
					<br>
					<table class="table">
						<thead class="thead-dark">
							<tr>
								<th class="table-active">Id.</th>
								<th class="table-active">Nome.</th>
								<th class="table-active">Sexo.</th>
								<th class="table-active">Dt.</th>
								<th class="table-active">Dtc.</th>
								<th class="table-active">Cont.</th>
								<th class="table-active">End.</th>
								<th class="table-active"></th>
								<th class="table-active"></th>
								<th class="table-active"></th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="c : ${cliente}">
								<td th:text="${c.id}"></td>
								<td th:text="${c.nome}"></td>
								<td th:text="${c.sexo}"></td>
								<td th:text="${c.dataNasci}" ></td>
								<td th:text="${#temporals.format(c.dataCadastro, 'dd/MM/yyyy')}"></td>
								<td>
									<span th:each="contato : ${c.contato}" th:text="${contato.contatoEnum}"></span><br>
									<span th:each="contato : ${c.contato}" th:text="${contato.telefone}"></span><br>
									<span th:each="contato : ${c.contato}" th:text="${contato.email}"></span><br>
								</td>
								<td th:each="end : ${c.endereco}">
									<span th:text="${end.enderecoEnum}"></span><br>
									<button type="button" class="btn btn-outline-info" data-bs-toggle="popover"
									    th:each="end : ${c.endereco}" 
									    th:attr="data-bs-content=${#strings.concat(
									      end.uf, ' - ',
									      end.localidade, ' ',
									      end.bairro, ' - [Cep',
									      end.cep, '], ',
									      end.logradouro, '-',
									      end.complemento, ' - ',
									      end.numero)}">
									    <span class="bi bi-eye"></span>
									  </button>
									</td>
								<td><a class="btn btn-outline-info btn-sm"
										th:href="@{/cliente/{c.id}(c.id=${c.id})}">Detalhes</a></td>
								<td><a class="btn btn-outline-primary btn-sm"
										th:href="@{/cliente/{c.id}/editar(c.id=${c.id})}">Editar</a></td>
								<td><a class="btn btn-outline-danger btn-sm"
										th:href="@{/cliente/{c.id}/excluir(c.id=${c.id})}">Excluir</a></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</fieldset>
	</div>
</body>
<script th:type="@{text/javascript}">
	const popoverTriggerList = document.querySelectorAll('[data-bs-toggle="popover"]')
	const popoverList = [...popoverTriggerList].map(popoverTriggerEl => new bootstrap.Popover(popoverTriggerEl))
</script>

</html>